{"version":3,"sources":["../../src/models/articles_comments.model.ts"],"sourcesContent":["// src/models/article-comments.model.ts\nimport { Sequelize, DataTypes, Model, Optional } from \"sequelize\";\nimport { Comment } from \"@/interfaces/comment.interface\";\nimport { UserModel } from \"./users.model\";\nimport { FileModel } from \"./files.model\";\nimport { User } from \"@/interfaces/user.interface\";\nimport { Article } from \"@/interfaces/article.interface\";\nimport { ArticleModel } from \"./articles.model\";\n\nexport type ArticleCommentCreationAttributes = Optional<Comment, \"pk\" | \"uuid\">;\n\nexport class ArticleCommentModel extends Model<Comment, ArticleCommentCreationAttributes> implements Comment {\n  public pk: number;\n  public uuid: string;\n  public article_id: number;\n  public author_id: number;\n  public comment: string;\n\n  public readonly article: Article\n  public readonly author: User;\n\n  public replies: number;\n  public likes: number;\n\n  public readonly created_at!: Date;\n  public readonly updated_at!: Date;\n  public readonly deleted_at: Date;\n}\n\nexport default function (sequelize: Sequelize): typeof ArticleCommentModel {\n  ArticleCommentModel.init(\n    {\n      pk: {\n        type: DataTypes.INTEGER,\n        primaryKey: true,\n        autoIncrement: true,\n      },\n      uuid: {\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n      },\n      article_id: {\n        allowNull: false,\n        type: DataTypes.INTEGER,\n      },\n      author_id: {\n        allowNull: false,\n        type: DataTypes.INTEGER,\n      },\n      comment: {\n        type: DataTypes.TEXT,\n        allowNull: false,\n      },\n    },\n    {\n      tableName: \"articles_comments\",\n      timestamps: true,\n      paranoid: true,\n      sequelize,\n      defaultScope: {\n        include: [\n          {\n            attributes: [\"uuid\", \"full_name\", \"display_picture\"],\n            model: UserModel,\n            as: \"author\",\n            include: [\n              {\n                attributes: [\"uuid\"],\n                model: FileModel,\n                as: \"avatar\"\n              }\n            ]\n          },\n          {\n            attributes: [\"uuid\", \"title\"],\n            model: ArticleModel,\n            as: \"article\",\n          },\n        ]\n      }\n    },\n  );\n\n  ArticleModel.hasMany(ArticleCommentModel, { foreignKey: \"article_id\", as: \"comments\" });\n  ArticleCommentModel.belongsTo(ArticleModel, { foreignKey: \"article_id\", as: \"article\" });\n  ArticleCommentModel.belongsTo(UserModel, { foreignKey: \"author_id\", as: \"author\" });\n\n  return ArticleCommentModel;\n}\n"],"names":["ArticleCommentModel","Model","pk","uuid","article_id","author_id","comment","article","author","replies","likes","created_at","updated_at","deleted_at","sequelize","init","type","DataTypes","INTEGER","primaryKey","autoIncrement","UUID","defaultValue","UUIDV4","allowNull","TEXT","tableName","timestamps","paranoid","defaultScope","include","attributes","model","UserModel","as","FileModel","ArticleModel","hasMany","foreignKey","belongsTo"],"mappings":";;;;;;;;;;;QAWaA;eAAAA;;QAkBb;eAAA;;;2BA5BsD;4BAE5B;4BACA;+BAGG;;;;;;;;;;;;;;AAItB,IAAA,AAAMA,sBAAN,MAAMA,4BAA4BC,gBAAK;;QAAvC,gBACL,uBAAOC,MAAP,KAAA,IACA,uBAAOC,QAAP,KAAA,IACA,uBAAOC,cAAP,KAAA,IACA,uBAAOC,aAAP,KAAA,IACA,uBAAOC,WAAP,KAAA,IAEA,uBAAgBC,WAAhB,KAAA,IACA,uBAAgBC,UAAhB,KAAA,IAEA,uBAAOC,WAAP,KAAA,IACA,uBAAOC,SAAP,KAAA,IAEA,uBAAgBC,cAAhB,KAAA,IACA,uBAAgBC,cAAhB,KAAA,IACA,uBAAgBC,cAAhB,KAAA;;AACF;AAEe,SAAf,SAAyBC,SAAoB;IAC3Cd,oBAAoBe,IAAI,CACtB;QACEb,IAAI;YACFc,MAAMC,oBAAS,CAACC,OAAO;YACvBC,YAAY;YACZC,eAAe;QACjB;QACAjB,MAAM;YACJa,MAAMC,oBAAS,CAACI,IAAI;YACpBC,cAAcL,oBAAS,CAACM,MAAM;QAChC;QACAnB,YAAY;YACVoB,WAAW;YACXR,MAAMC,oBAAS,CAACC,OAAO;QACzB;QACAb,WAAW;YACTmB,WAAW;YACXR,MAAMC,oBAAS,CAACC,OAAO;QACzB;QACAZ,SAAS;YACPU,MAAMC,oBAAS,CAACQ,IAAI;YACpBD,WAAW;QACb;IACF,GACA;QACEE,WAAW;QACXC,YAAY;QACZC,UAAU;QACVd;QACAe,cAAc;YACZC,SAAS;gBACP;oBACEC,YAAY;wBAAC;wBAAQ;wBAAa;qBAAkB;oBACpDC,OAAOC,qBAAS;oBAChBC,IAAI;oBACJJ,SAAS;wBACP;4BACEC,YAAY;gCAAC;6BAAO;4BACpBC,OAAOG,qBAAS;4BAChBD,IAAI;wBACN;qBACD;gBACH;gBACA;oBACEH,YAAY;wBAAC;wBAAQ;qBAAQ;oBAC7BC,OAAOI,2BAAY;oBACnBF,IAAI;gBACN;aACD;QACH;IACF;IAGFE,2BAAY,CAACC,OAAO,CAACrC,qBAAqB;QAAEsC,YAAY;QAAcJ,IAAI;IAAW;IACrFlC,oBAAoBuC,SAAS,CAACH,2BAAY,EAAE;QAAEE,YAAY;QAAcJ,IAAI;IAAU;IACtFlC,oBAAoBuC,SAAS,CAACN,qBAAS,EAAE;QAAEK,YAAY;QAAaJ,IAAI;IAAS;IAEjF,OAAOlC;AACT"}