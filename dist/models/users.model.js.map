{"version":3,"sources":["../../src/models/users.model.ts"],"sourcesContent":["import { Sequelize, DataTypes, Model, Optional } from \"sequelize\";\nimport { User } from \"@interfaces/user.interface\";\n\nimport { FileModel } from \"@models/files.model\";\nimport { UserRole } from '@interfaces/authentication/user-role.interface';\n\nexport type UserCreationAttributes = Optional<User, \"pk\" | \"uuid\" | \"full_name\" | \"display_picture\">;\nexport class UserModel extends Model<User, UserCreationAttributes> implements User {\n  public pk: number;\n  public uuid: string;\n\n  public full_name: string;\n  public display_picture: number;\n  public email: string;\n  public password: string;\n  public email_verified_at: Date;\n\n  public readonly created_at!: Date;\n  public readonly updated_at!: Date;\n  public readonly deleted_at: Date;\n}\n\nexport default function (sequelize: Sequelize): typeof UserModel {\n  UserModel.init(\n    {\n      pk: {\n        type: DataTypes.INTEGER,\n        autoIncrement: true,\n        primaryKey: true,\n      },\n      uuid: {\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n      },\n      full_name: {\n        type: DataTypes.STRING,\n        allowNull: true,\n      },\n      display_picture: {\n        type: DataTypes.INTEGER,\n        allowNull: true,\n        // references: {\n        //   model: FileModel,\n        //   key: \"pk\",\n        // },\n        // onDelete: \"CASCADE\",\n        // onUpdate: \"CASCADE\",\n      },\n      email: {\n        allowNull: false,\n        type: DataTypes.STRING,\n      },\n      password: {\n        allowNull: false,\n        type: DataTypes.TEXT,\n      },\n      email_verified_at: {\n        type: DataTypes.DATE,\n        allowNull: true\n      }\n    },\n    {\n      tableName: \"users\",\n      timestamps: true,\n      paranoid: true,\n      sequelize,\n      defaultScope: {\n        attributes: { exclude: [\"password\"] },\n      },\n    },\n  );\n\n  FileModel.hasOne(UserModel, {\n    foreignKey: \"display_picture\",\n    as: \"avatar\"\n  });\n\n  UserModel.belongsTo(FileModel, {\n    foreignKey: \"display_picture\",\n    as: \"avatar\"\n  });\n\n  return UserModel;\n}"],"names":["UserModel","Model","pk","uuid","full_name","display_picture","email","password","email_verified_at","created_at","updated_at","deleted_at","sequelize","init","type","DataTypes","INTEGER","autoIncrement","primaryKey","UUID","defaultValue","UUIDV4","STRING","allowNull","TEXT","DATE","tableName","timestamps","paranoid","defaultScope","attributes","exclude","FileModel","hasOne","foreignKey","as","belongsTo"],"mappings":";;;;;;;;;;;QAOaA;eAAAA;;QAeb;eAAA;;;2BAtBsD;4BAG5B;;;;;;;;;;;;;;AAInB,IAAA,AAAMA,YAAN,MAAMA,kBAAkBC,gBAAK;;QAA7B,gBACL,uBAAOC,MAAP,KAAA,IACA,uBAAOC,QAAP,KAAA,IAEA,uBAAOC,aAAP,KAAA,IACA,uBAAOC,mBAAP,KAAA,IACA,uBAAOC,SAAP,KAAA,IACA,uBAAOC,YAAP,KAAA,IACA,uBAAOC,qBAAP,KAAA,IAEA,uBAAgBC,cAAhB,KAAA,IACA,uBAAgBC,cAAhB,KAAA,IACA,uBAAgBC,cAAhB,KAAA;;AACF;AAEe,SAAf,SAAyBC,SAAoB;IAC3CZ,UAAUa,IAAI,CACZ;QACEX,IAAI;YACFY,MAAMC,oBAAS,CAACC,OAAO;YACvBC,eAAe;YACfC,YAAY;QACd;QACAf,MAAM;YACJW,MAAMC,oBAAS,CAACI,IAAI;YACpBC,cAAcL,oBAAS,CAACM,MAAM;QAChC;QACAjB,WAAW;YACTU,MAAMC,oBAAS,CAACO,MAAM;YACtBC,WAAW;QACb;QACAlB,iBAAiB;YACfS,MAAMC,oBAAS,CAACC,OAAO;YACvBO,WAAW;QAOb;QACAjB,OAAO;YACLiB,WAAW;YACXT,MAAMC,oBAAS,CAACO,MAAM;QACxB;QACAf,UAAU;YACRgB,WAAW;YACXT,MAAMC,oBAAS,CAACS,IAAI;QACtB;QACAhB,mBAAmB;YACjBM,MAAMC,oBAAS,CAACU,IAAI;YACpBF,WAAW;QACb;IACF,GACA;QACEG,WAAW;QACXC,YAAY;QACZC,UAAU;QACVhB;QACAiB,cAAc;YACZC,YAAY;gBAAEC,SAAS;oBAAC;iBAAW;YAAC;QACtC;IACF;IAGFC,qBAAS,CAACC,MAAM,CAACjC,WAAW;QAC1BkC,YAAY;QACZC,IAAI;IACN;IAEAnC,UAAUoC,SAAS,CAACJ,qBAAS,EAAE;QAC7BE,YAAY;QACZC,IAAI;IACN;IAEA,OAAOnC;AACT"}