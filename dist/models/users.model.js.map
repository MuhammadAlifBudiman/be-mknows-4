{"version":3,"sources":["../../src/models/users.model.ts"],"sourcesContent":["import { Sequelize, DataTypes, Model, Optional } from \"sequelize\";\nimport { User } from \"@interfaces/user.interface\";\n\nimport { FileModel } from \"@models/files.model\";\nimport { UserRole } from '@interfaces/authentication/user-role.interface';\n\nexport type UserCreationAttributes = Optional<User, \"pk\" | \"uuid\" | \"full_name\" | \"display_picture\">;\nexport class UserModel extends Model<User, UserCreationAttributes> {\n}\n\nexport default function (sequelize: Sequelize): typeof UserModel {\n  UserModel.init(\n    {\n      pk: {\n        type: DataTypes.INTEGER,\n        autoIncrement: true,\n        primaryKey: true,\n      },\n      uuid: {\n        type: DataTypes.UUID,\n        defaultValue: DataTypes.UUIDV4,\n      },\n      full_name: {\n        type: DataTypes.STRING,\n        allowNull: true,\n      },\n      display_picture: {\n        type: DataTypes.INTEGER,\n        allowNull: true,\n        // references: {\n        //   model: FileModel,\n        //   key: \"pk\",\n        // },\n        // onDelete: \"CASCADE\",\n        // onUpdate: \"CASCADE\",\n      },\n      email: {\n        allowNull: false,\n        type: DataTypes.STRING,\n      },\n      password: {\n        allowNull: false,\n        type: DataTypes.TEXT,\n      },\n      email_verified_at: {\n        type: DataTypes.DATE,\n        allowNull: true\n      }\n    },\n    {\n      tableName: \"users\",\n      timestamps: true,\n      paranoid: true,\n      sequelize,\n      defaultScope: {\n        attributes: { exclude: [\"password\"] },\n      },\n    },\n  );\n\n  FileModel.hasOne(UserModel, {\n    foreignKey: \"display_picture\",\n    as: \"avatar\"\n  });\n\n  UserModel.belongsTo(FileModel, {\n    foreignKey: \"display_picture\",\n    as: \"avatar\"\n  });\n\n  return UserModel;\n}"],"names":["UserModel","Model","sequelize","init","pk","type","DataTypes","INTEGER","autoIncrement","primaryKey","uuid","UUID","defaultValue","UUIDV4","full_name","STRING","allowNull","display_picture","email","password","TEXT","email_verified_at","DATE","tableName","timestamps","paranoid","defaultScope","attributes","exclude","FileModel","hasOne","foreignKey","as","belongsTo"],"mappings":";;;;;;;;;;;QAOaA;eAAAA;;QAGb;eAAA;;;2BAVsD;4BAG5B;AAInB,IAAA,AAAMA,YAAN,MAAMA,kBAAkBC,gBAAK;AACpC;AAEe,SAAf,SAAyBC,SAAoB;IAC3CF,UAAUG,IAAI,CACZ;QACEC,IAAI;YACFC,MAAMC,oBAAS,CAACC,OAAO;YACvBC,eAAe;YACfC,YAAY;QACd;QACAC,MAAM;YACJL,MAAMC,oBAAS,CAACK,IAAI;YACpBC,cAAcN,oBAAS,CAACO,MAAM;QAChC;QACAC,WAAW;YACTT,MAAMC,oBAAS,CAACS,MAAM;YACtBC,WAAW;QACb;QACAC,iBAAiB;YACfZ,MAAMC,oBAAS,CAACC,OAAO;YACvBS,WAAW;QAOb;QACAE,OAAO;YACLF,WAAW;YACXX,MAAMC,oBAAS,CAACS,MAAM;QACxB;QACAI,UAAU;YACRH,WAAW;YACXX,MAAMC,oBAAS,CAACc,IAAI;QACtB;QACAC,mBAAmB;YACjBhB,MAAMC,oBAAS,CAACgB,IAAI;YACpBN,WAAW;QACb;IACF,GACA;QACEO,WAAW;QACXC,YAAY;QACZC,UAAU;QACVvB;QACAwB,cAAc;YACZC,YAAY;gBAAEC,SAAS;oBAAC;iBAAW;YAAC;QACtC;IACF;IAGFC,qBAAS,CAACC,MAAM,CAAC9B,WAAW;QAC1B+B,YAAY;QACZC,IAAI;IACN;IAEAhC,UAAUiC,SAAS,CAACJ,qBAAS,EAAE;QAC7BE,YAAY;QACZC,IAAI;IACN;IAEA,OAAOhC;AACT"}