{"version":3,"sources":["../../src/middlewares/file-uploader.middleware.ts"],"sourcesContent":["import { Request } from \"express\";\nimport multer from \"multer\";\n\nimport { HttpException } from \"@exceptions/HttpException\";\nimport { MAX_SIZE_FILE_UPLOAD } from \"@config/index\";\n\nexport const uploadFile = multer({\n  limits: {\n    files: 10,\n    fileSize: Number(MAX_SIZE_FILE_UPLOAD),\n  },\n  storage: multer.diskStorage({\n    destination: (req, file, cb) => {\n      cb(null, 'uploads/');\n    },\n    filename: (req, file, cb) => {\n      cb(null, Date.now() + '-' + file.originalname);\n    }\n  }),\n  \n  fileFilter(req: Request, file: Express.Multer.File, callback: multer.FileFilterCallback) {\n    if (!file.mimetype.match(/^image|application\\/(jpg|jpeg|png)$/)) { // Regex\n      return callback(new HttpException(false, 400, \"Invalid File Format\"));\n    }\n    callback(null, true);\n  },\n});"],"names":["uploadFile","multer","limits","files","fileSize","Number","MAX_SIZE_FILE_UPLOAD","storage","diskStorage","destination","req","file","cb","filename","Date","now","originalname","fileFilter","callback","mimetype","match","HttpException"],"mappings":";;;;+BAMaA;;;eAAAA;;;+DALM;+BAEW;uBACO;;;;;;AAE9B,MAAMA,aAAaC,IAAAA,eAAM,EAAC;IAC/BC,QAAQ;QACNC,OAAO;QACPC,UAAUC,OAAOC,2BAAoB;IACvC;IACAC,SAASN,eAAM,CAACO,WAAW,CAAC;QAC1BC,aAAa,CAACC,KAAKC,MAAMC;YACvBA,GAAG,MAAM;QACX;QACAC,UAAU,CAACH,KAAKC,MAAMC;YACpBA,GAAG,MAAME,KAAKC,GAAG,KAAK,MAAMJ,KAAKK,YAAY;QAC/C;IACF;IAEAC,YAAWP,GAAY,EAAEC,IAAyB,EAAEO,QAAmC;QACrF,IAAI,CAACP,KAAKQ,QAAQ,CAACC,KAAK,CAAC,wCAAwC;YAC/D,OAAOF,SAAS,IAAIG,4BAAa,CAAC,OAAO,KAAK;QAChD;QACAH,SAAS,MAAM;IACjB;AACF"}