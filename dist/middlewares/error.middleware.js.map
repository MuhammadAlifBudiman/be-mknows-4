{"version":3,"sources":["../../src/middlewares/error.middleware.ts"],"sourcesContent":["/**\n * Error handling middleware for Express routes.\n * Logs errors and sends standardized error responses based on error type.\n */\nimport { NextFunction, Request, Response } from \"express\"; // Express types\nimport { HttpException } from \"@exceptions/HttpException\"; // Custom HTTP exception\nimport { logger } from \"@utils/logger\"; // Logger utility\n\n/**\n * Main error middleware for handling exceptions and formatting error responses.\n * @param error - The error object (HttpException)\n * @param req - Express request\n * @param res - Express response\n * @param next - Express next middleware\n */\nexport const ErrorMiddleware = (error: HttpException, req: Request, res: Response, next: NextFunction) => {\n  try {\n    const status: number = error.status || 500; // HTTP status code\n    const message: string = error.message || \"Something went wrong\"; // Error message\n    const errors: string[] = error.errors || []; // Array of error details\n    // const success: boolean = error.success || false;\n\n    // Handle specific error messages for property and UUID errors\n    if(message.endsWith(\"does not exist\")) {\n      logger.error(`[${req.method}] ${req.path} >> StatusCode:: ${status}, Message:: ${message}`);\n      res.status(400).json({ code: 400, status: \"BAD REQUEST\", message: \"Invalid Property\", errors });\n    } else if(message.startsWith(\"invalid input syntax for\")) {\n      logger.error(`[${req.method}] ${req.path} >> StatusCode:: ${status}, Message:: ${message}`);\n      res.status(400).json({ code: 400, status: \"BAD REQUEST\", message: \"Invalid UUID\", errors });\n    } else {\n      // Default error response\n      logger.error(`[${req.method}] ${req.path} >> StatusCode:: ${status}, Message:: ${message}`);\n      res.status(status).json({ code: status, status: \"BAD REQUEST\", message, errors });\n    }\n  } catch (error) {\n    // Pass error to next middleware if something goes wrong\n    next(error);\n  }\n};"],"names":["ErrorMiddleware","error","req","res","next","status","message","errors","endsWith","logger","method","path","json","code","startsWith"],"mappings":";;;;+BAeaA;;;eAAAA;;;wBATU;AAShB,MAAMA,kBAAkB,CAACC,OAAsBC,KAAcC,KAAeC;IACjF,IAAI;QACF,MAAMC,SAAiBJ,MAAMI,MAAM,IAAI;QACvC,MAAMC,UAAkBL,MAAMK,OAAO,IAAI;QACzC,MAAMC,SAAmBN,MAAMM,MAAM,IAAI,EAAE;QAI3C,IAAGD,QAAQE,QAAQ,CAAC,mBAAmB;YACrCC,cAAM,CAACR,KAAK,CAAC,CAAC,CAAC,EAAEC,IAAIQ,MAAM,CAAC,EAAE,EAAER,IAAIS,IAAI,CAAC,iBAAiB,EAAEN,OAAO,YAAY,EAAEC,SAAS;YAC1FH,IAAIE,MAAM,CAAC,KAAKO,IAAI,CAAC;gBAAEC,MAAM;gBAAKR,QAAQ;gBAAeC,SAAS;gBAAoBC;YAAO;QAC/F,OAAO,IAAGD,QAAQQ,UAAU,CAAC,6BAA6B;YACxDL,cAAM,CAACR,KAAK,CAAC,CAAC,CAAC,EAAEC,IAAIQ,MAAM,CAAC,EAAE,EAAER,IAAIS,IAAI,CAAC,iBAAiB,EAAEN,OAAO,YAAY,EAAEC,SAAS;YAC1FH,IAAIE,MAAM,CAAC,KAAKO,IAAI,CAAC;gBAAEC,MAAM;gBAAKR,QAAQ;gBAAeC,SAAS;gBAAgBC;YAAO;QAC3F,OAAO;YAELE,cAAM,CAACR,KAAK,CAAC,CAAC,CAAC,EAAEC,IAAIQ,MAAM,CAAC,EAAE,EAAER,IAAIS,IAAI,CAAC,iBAAiB,EAAEN,OAAO,YAAY,EAAEC,SAAS;YAC1FH,IAAIE,MAAM,CAACA,QAAQO,IAAI,CAAC;gBAAEC,MAAMR;gBAAQA,QAAQ;gBAAeC;gBAASC;YAAO;QACjF;IACF,EAAE,OAAON,OAAO;QAEdG,KAAKH;IACP;AACF"}