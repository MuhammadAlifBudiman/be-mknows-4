{"version":3,"sources":["../../src/utils/mailer.ts"],"sourcesContent":["// Import ejs for rendering email templates\nimport ejs from \"ejs\";\n// Import path for file path operations\nimport path from \"path\";\n// Import fs for file system checks\nimport fs from \"fs\";\n// Import sendEmail function for sending emails\nimport { sendEmail } from \"@config/node-mailer\";\n// Import logger for logging information\nimport { logger } from \"@utils/logger\";\n\n/**\n * Sends an email verification OTP to the user's email address.\n *\n * @param {object} data - Data object containing email, full_name, otp, and expiration_time.\n * @returns {Promise<void>} - Resolves when the email is sent.\n *\n * - Loads and renders the EJS template for email verification.\n * - Logs template path and existence for debugging.\n * - Sends the rendered template via email.\n */\nexport const sendEmailOTP = async (data): Promise<void> => {\n  // Use require.resolve to force Vercel to bundle the template\n  const templatePath = require.resolve(\"../../public/templates/email-verification.ejs\");\n  logger.info(`[sendEmailOTP] templatePath: ${templatePath}`);\n  logger.info(`[sendEmailOTP] file exists: ${fs.existsSync(templatePath)}`);\n\n  const template = await ejs.renderFile(\n    templatePath,\n    { data },\n  );\n\n  await sendEmail(data.email, \"Email Verification\", template);\n};\n"],"names":["sendEmailOTP","data","templatePath","require","resolve","logger","info","fs","existsSync","template","ejs","renderFile","sendEmail","email"],"mappings":";;;;+BAqBaA;;;eAAAA;;;4DApBG;2DAID;4BAEW;wBAEH;;;;;;AAYhB,MAAMA,eAAe,OAAOC;IAEjC,MAAMC,eAAeC,QAAQC,OAAO,CAAC;IACrCC,cAAM,CAACC,IAAI,CAAC,CAAC,6BAA6B,EAAEJ,cAAc;IAC1DG,cAAM,CAACC,IAAI,CAAC,CAAC,4BAA4B,EAAEC,WAAE,CAACC,UAAU,CAACN,eAAe;IAExE,MAAMO,WAAW,MAAMC,YAAG,CAACC,UAAU,CACnCT,cACA;QAAED;IAAK;IAGT,MAAMW,IAAAA,qBAAS,EAACX,KAAKY,KAAK,EAAE,sBAAsBJ;AACpD"}