{"version":3,"sources":["../../src/controllers/account.controller.ts"],"sourcesContent":["import { Response, NextFunction } from \"express\";\nimport asyncHandler from \"express-async-handler\";\nimport { Container } from \"typedi\";\n\nimport { User } from \"@interfaces/user.interface\";\nimport { UserSession } from \"@interfaces/user-session.interface\";\nimport { RequestWithUser } from \"@interfaces/authentication/token.interface\";\nimport { UpdateUserProfileDto } from \"@dtos/account.dto\";\n\nimport { AccountService } from \"@services/account.service\";\nimport { apiResponse } from \"@utils/apiResponse\";\n\nexport class AccountController {\n  private account = Container.get(AccountService);\n\n  public getMyProfile = asyncHandler(async (req: RequestWithUser, res: Response, next: NextFunction) => {\n    const user_id = req.user.pk as number;\n    const user: User = await this.account.getProfileByUserId(user_id);\n\n    res.status(200).json(apiResponse(200, \"OK\", \"Get Profile Success\", user));\n  });\n\n  public getMySessionsHistories = asyncHandler(async (req: RequestWithUser, res: Response, next: NextFunction) => {\n    const user_id = req.user.pk as number;\n    const session_id = req.session_id;\n    const userSessions: UserSession[] = await this.account.getSessionsHistoriesByUserId(user_id, session_id);\n\n    res.status(200).json(apiResponse(200, \"OK\", \"Get Sessions Histories Success\", userSessions));\n  });\n\n  public updateMyProfile = asyncHandler(async (req: RequestWithUser, res: Response, next: NextFunction) => {\n    const user_id = req.user.pk as number;\n    const updatedProfile: UpdateUserProfileDto = req.body;\n\n    const user: User = await this.account.updateUserProfile(user_id, updatedProfile);\n\n    res.status(200).json(apiResponse(200, \"OK\", \"Get Profile Success\", user));\n  });\n}"],"names":["AccountController","account","Container","get","AccountService","getMyProfile","asyncHandler","req","res","next","user_id","user","pk","getProfileByUserId","status","json","apiResponse","getMySessionsHistories","session_id","userSessions","getSessionsHistoriesByUserId","updateMyProfile","updatedProfile","body","updateUserProfile"],"mappings":";;;;+BAYaA;;;eAAAA;;;4EAXY;wBACC;gCAOK;6BACH;;;;;;;;;;;;;;;;;;;AAErB,IAAA,AAAMA,oBAAN,MAAMA;;QACX,uBAAQC,WAAUC,iBAAS,CAACC,GAAG,CAACC,8BAAc;QAE9C,uBAAOC,gBAAeC,IAAAA,4BAAY,EAAC,OAAOC,KAAsBC,KAAeC;YAC7E,MAAMC,UAAUH,IAAII,IAAI,CAACC,EAAE;YAC3B,MAAMD,OAAa,MAAM,IAAI,CAACV,OAAO,CAACY,kBAAkB,CAACH;YAEzDF,IAAIM,MAAM,CAAC,KAAKC,IAAI,CAACC,IAAAA,wBAAW,EAAC,KAAK,MAAM,uBAAuBL;QACrE;QAEA,uBAAOM,0BAAyBX,IAAAA,4BAAY,EAAC,OAAOC,KAAsBC,KAAeC;YACvF,MAAMC,UAAUH,IAAII,IAAI,CAACC,EAAE;YAC3B,MAAMM,aAAaX,IAAIW,UAAU;YACjC,MAAMC,eAA8B,MAAM,IAAI,CAAClB,OAAO,CAACmB,4BAA4B,CAACV,SAASQ;YAE7FV,IAAIM,MAAM,CAAC,KAAKC,IAAI,CAACC,IAAAA,wBAAW,EAAC,KAAK,MAAM,kCAAkCG;QAChF;QAEA,uBAAOE,mBAAkBf,IAAAA,4BAAY,EAAC,OAAOC,KAAsBC,KAAeC;YAChF,MAAMC,UAAUH,IAAII,IAAI,CAACC,EAAE;YAC3B,MAAMU,iBAAuCf,IAAIgB,IAAI;YAErD,MAAMZ,OAAa,MAAM,IAAI,CAACV,OAAO,CAACuB,iBAAiB,CAACd,SAASY;YAEjEd,IAAIM,MAAM,CAAC,KAAKC,IAAI,CAACC,IAAAA,wBAAW,EAAC,KAAK,MAAM,uBAAuBL;QACrE;;AACF"}