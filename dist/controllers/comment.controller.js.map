{"version":3,"sources":["../../src/controllers/comment.controller.ts"],"sourcesContent":["import { Response, NextFunction } from \"express\";\nimport { RequestWithUser } from \"@/interfaces/authentication/token.interface\";\nimport { CommentService } from \"@/services/comments.service\";\nimport { apiResponse } from \"@/utils/apiResponse\";\nimport {Container} from \"typedi\";\nimport asyncHandler from \"express-async-handler\";\nimport { Comment, CommentParsed } from \"@/interfaces/comment.interface\";\n\n\nexport class CommentController{\n    private comment = Container.get(CommentService);\n\n    public getComments = asyncHandler( async (req: RequestWithUser, res: Response, next: NextFunction) => {\n        const response = await this.comment.getComments();\n        res.status(200).json(apiResponse(200, \"OK\", \"Get Comment Success\", response.comments));\n    });\n\n    public getCommentsByArticle = asyncHandler(async (req: RequestWithUser, res: Response, next: NextFunction) => {\n        const { article_id } = req.params;\n        const response = await this.comment.getCommentsByArticle(article_id);\n        res.status(200).json(apiResponse(200, \"OK\", \"Get Comment Success\", response.comments));\n    });\n\n    public createComment = asyncHandler(async (req: RequestWithUser, res: Response, next: NextFunction) => {\n        const { article_id } = req.params;\n        const author_id = req.user.pk;\n        const data = req.body;\n        const response = await this.comment.createComment(article_id, author_id, data);\n        res.status(200).json(apiResponse(200, \"OK\", \"Create Comment Success\", response));\n    });\n\n    public updateComment = asyncHandler(async (req: RequestWithUser, res: Response, next: NextFunction) => {\n        const { comment_id } = req.params;\n        \n        const data = req.body;\n        const response = await this.comment.updateComment(comment_id, data);\n        res.status(200).json(apiResponse(200, \"OK\", \"Update Comment Success\", response));\n    });\n\n    public deleteComment = asyncHandler(async (req: RequestWithUser, res: Response, next: NextFunction) => {\n        const { comment_id } = req.params;\n        const response: boolean = await this.comment.deleteComment(comment_id);\n        res.status(200).json(apiResponse(200, \"OK\", \"Delete Comment Success\", response));\n    });\n\n    public likeComment = asyncHandler(async (req: RequestWithUser, res: Response, next: NextFunction) => {\n        const { comment_id } = req.params;\n        const user_id = req.user.pk;\n        const response = await this.comment.likeComment(comment_id, user_id);\n        res.status(200).json(apiResponse(200, \"OK\", \"Like Comment Success\", response));\n    });\n}"],"names":["CommentController","comment","Container","get","CommentService","getComments","asyncHandler","req","res","next","response","status","json","apiResponse","comments","getCommentsByArticle","article_id","params","createComment","author_id","user","pk","data","body","updateComment","comment_id","deleteComment","likeComment","user_id"],"mappings":";;;;+BASaA;;;eAAAA;;;iCAPkB;6BACH;wBACJ;4EACC;;;;;;;;;;;;;;;;;;;AAIlB,IAAA,AAAMA,oBAAN,MAAMA;;QACT,uBAAQC,WAAUC,iBAAS,CAACC,GAAG,CAACC,+BAAc;QAE9C,uBAAOC,eAAcC,IAAAA,4BAAY,EAAE,OAAOC,KAAsBC,KAAeC;YAC3E,MAAMC,WAAW,MAAM,IAAI,CAACT,OAAO,CAACI,WAAW;YAC/CG,IAAIG,MAAM,CAAC,KAAKC,IAAI,CAACC,IAAAA,wBAAW,EAAC,KAAK,MAAM,uBAAuBH,SAASI,QAAQ;QACxF;QAEA,uBAAOC,wBAAuBT,IAAAA,4BAAY,EAAC,OAAOC,KAAsBC,KAAeC;YACnF,MAAM,EAAEO,UAAU,EAAE,GAAGT,IAAIU,MAAM;YACjC,MAAMP,WAAW,MAAM,IAAI,CAACT,OAAO,CAACc,oBAAoB,CAACC;YACzDR,IAAIG,MAAM,CAAC,KAAKC,IAAI,CAACC,IAAAA,wBAAW,EAAC,KAAK,MAAM,uBAAuBH,SAASI,QAAQ;QACxF;QAEA,uBAAOI,iBAAgBZ,IAAAA,4BAAY,EAAC,OAAOC,KAAsBC,KAAeC;YAC5E,MAAM,EAAEO,UAAU,EAAE,GAAGT,IAAIU,MAAM;YACjC,MAAME,YAAYZ,IAAIa,IAAI,CAACC,EAAE;YAC7B,MAAMC,OAAOf,IAAIgB,IAAI;YACrB,MAAMb,WAAW,MAAM,IAAI,CAACT,OAAO,CAACiB,aAAa,CAACF,YAAYG,WAAWG;YACzEd,IAAIG,MAAM,CAAC,KAAKC,IAAI,CAACC,IAAAA,wBAAW,EAAC,KAAK,MAAM,0BAA0BH;QAC1E;QAEA,uBAAOc,iBAAgBlB,IAAAA,4BAAY,EAAC,OAAOC,KAAsBC,KAAeC;YAC5E,MAAM,EAAEgB,UAAU,EAAE,GAAGlB,IAAIU,MAAM;YAEjC,MAAMK,OAAOf,IAAIgB,IAAI;YACrB,MAAMb,WAAW,MAAM,IAAI,CAACT,OAAO,CAACuB,aAAa,CAACC,YAAYH;YAC9Dd,IAAIG,MAAM,CAAC,KAAKC,IAAI,CAACC,IAAAA,wBAAW,EAAC,KAAK,MAAM,0BAA0BH;QAC1E;QAEA,uBAAOgB,iBAAgBpB,IAAAA,4BAAY,EAAC,OAAOC,KAAsBC,KAAeC;YAC5E,MAAM,EAAEgB,UAAU,EAAE,GAAGlB,IAAIU,MAAM;YACjC,MAAMP,WAAoB,MAAM,IAAI,CAACT,OAAO,CAACyB,aAAa,CAACD;YAC3DjB,IAAIG,MAAM,CAAC,KAAKC,IAAI,CAACC,IAAAA,wBAAW,EAAC,KAAK,MAAM,0BAA0BH;QAC1E;QAEA,uBAAOiB,eAAcrB,IAAAA,4BAAY,EAAC,OAAOC,KAAsBC,KAAeC;YAC1E,MAAM,EAAEgB,UAAU,EAAE,GAAGlB,IAAIU,MAAM;YACjC,MAAMW,UAAUrB,IAAIa,IAAI,CAACC,EAAE;YAC3B,MAAMX,WAAW,MAAM,IAAI,CAACT,OAAO,CAAC0B,WAAW,CAACF,YAAYG;YAC5DpB,IAAIG,MAAM,CAAC,KAAKC,IAAI,CAACC,IAAAA,wBAAW,EAAC,KAAK,MAAM,wBAAwBH;QACxE;;AACJ"}