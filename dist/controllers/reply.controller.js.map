{"version":3,"sources":["../../src/controllers/reply.controller.ts"],"sourcesContent":["import { Response, NextFunction } from \"express\";\nimport { RequestWithUser } from \"@/interfaces/authentication/token.interface\";\nimport { apiResponse } from \"@/utils/apiResponse\";\nimport {Container} from \"typedi\";\nimport { CommentReply } from \"@/interfaces/comment.interface\";\nimport { ReplyService } from \"@/services/replies.service\";\nimport asyncHandler from \"express-async-handler\";\n\nexport class ReplyController{\n    private reply = Container.get(ReplyService);\n\n    public getReplies = asyncHandler(async (req: RequestWithUser, res: Response, next: NextFunction) => {\n        const response = await this.reply.getReplies();\n        res.status(200).json(apiResponse(200, \"OK\", \"Get Reply Success\", response.replies));\n    })\n\n    public getRepliesByComment = asyncHandler(async (req: RequestWithUser, res: Response, next: NextFunction) => {\n        const { comment_id } = req.params;\n        const response = await this.reply.getRepliesByComment(comment_id);\n        res.status(200).json(apiResponse(200, \"OK\", \"Get Reply Success\", response.replies));\n    })\n\n    public createReply = asyncHandler(async (req: RequestWithUser, res: Response, next: NextFunction) => {\n        const { comment_id } = req.params;\n        const author_id = req.user.pk;\n        const data = req.body;\n        const response = await this.reply.createReply(comment_id, author_id, data);\n        res.status(200).json(apiResponse(200, \"OK\", \"Create Reply Success\", response));\n    })\n\n    public updateReply = asyncHandler(async (req: RequestWithUser, res: Response, next: NextFunction) => {\n        const { reply_id } = req.params;\n        \n        const data = req.body;\n        const response = await this.reply.updateReply(reply_id, data);\n        res.status(200).json(apiResponse(200, \"OK\", \"Update Reply Success\", response));\n    })\n\n    public deleteReply = asyncHandler(async (req: RequestWithUser, res: Response, next: NextFunction) => {\n        const { reply_id } = req.params;\n        const response: boolean = await this.reply.deleteReply(reply_id);\n        res.status(200).json(apiResponse(200, \"OK\", \"Delete Reply Success\", response));\n    })\n\n    public likeReply = asyncHandler(async (req: RequestWithUser, res: Response, next: NextFunction) => {\n        const { reply_id } = req.params;\n        const user_id = req.user.pk;\n        const response = await this.reply.likeReply(reply_id, user_id);\n        res.status(200).json(apiResponse(200, \"OK\", \"Like Reply Success\", response));\n    })\n}"],"names":["ReplyController","reply","Container","get","ReplyService","getReplies","asyncHandler","req","res","next","response","status","json","apiResponse","replies","getRepliesByComment","comment_id","params","createReply","author_id","user","pk","data","body","updateReply","reply_id","deleteReply","likeReply","user_id"],"mappings":";;;;+BAQaA;;;eAAAA;;;6BANe;wBACJ;gCAEK;4EACJ;;;;;;;;;;;;;;;;;;;AAElB,IAAA,AAAMA,kBAAN,MAAMA;;QACT,uBAAQC,SAAQC,iBAAS,CAACC,GAAG,CAACC,4BAAY;QAE1C,uBAAOC,cAAaC,IAAAA,4BAAY,EAAC,OAAOC,KAAsBC,KAAeC;YACzE,MAAMC,WAAW,MAAM,IAAI,CAACT,KAAK,CAACI,UAAU;YAC5CG,IAAIG,MAAM,CAAC,KAAKC,IAAI,CAACC,IAAAA,wBAAW,EAAC,KAAK,MAAM,qBAAqBH,SAASI,OAAO;QACrF;QAEA,uBAAOC,uBAAsBT,IAAAA,4BAAY,EAAC,OAAOC,KAAsBC,KAAeC;YAClF,MAAM,EAAEO,UAAU,EAAE,GAAGT,IAAIU,MAAM;YACjC,MAAMP,WAAW,MAAM,IAAI,CAACT,KAAK,CAACc,mBAAmB,CAACC;YACtDR,IAAIG,MAAM,CAAC,KAAKC,IAAI,CAACC,IAAAA,wBAAW,EAAC,KAAK,MAAM,qBAAqBH,SAASI,OAAO;QACrF;QAEA,uBAAOI,eAAcZ,IAAAA,4BAAY,EAAC,OAAOC,KAAsBC,KAAeC;YAC1E,MAAM,EAAEO,UAAU,EAAE,GAAGT,IAAIU,MAAM;YACjC,MAAME,YAAYZ,IAAIa,IAAI,CAACC,EAAE;YAC7B,MAAMC,OAAOf,IAAIgB,IAAI;YACrB,MAAMb,WAAW,MAAM,IAAI,CAACT,KAAK,CAACiB,WAAW,CAACF,YAAYG,WAAWG;YACrEd,IAAIG,MAAM,CAAC,KAAKC,IAAI,CAACC,IAAAA,wBAAW,EAAC,KAAK,MAAM,wBAAwBH;QACxE;QAEA,uBAAOc,eAAclB,IAAAA,4BAAY,EAAC,OAAOC,KAAsBC,KAAeC;YAC1E,MAAM,EAAEgB,QAAQ,EAAE,GAAGlB,IAAIU,MAAM;YAE/B,MAAMK,OAAOf,IAAIgB,IAAI;YACrB,MAAMb,WAAW,MAAM,IAAI,CAACT,KAAK,CAACuB,WAAW,CAACC,UAAUH;YACxDd,IAAIG,MAAM,CAAC,KAAKC,IAAI,CAACC,IAAAA,wBAAW,EAAC,KAAK,MAAM,wBAAwBH;QACxE;QAEA,uBAAOgB,eAAcpB,IAAAA,4BAAY,EAAC,OAAOC,KAAsBC,KAAeC;YAC1E,MAAM,EAAEgB,QAAQ,EAAE,GAAGlB,IAAIU,MAAM;YAC/B,MAAMP,WAAoB,MAAM,IAAI,CAACT,KAAK,CAACyB,WAAW,CAACD;YACvDjB,IAAIG,MAAM,CAAC,KAAKC,IAAI,CAACC,IAAAA,wBAAW,EAAC,KAAK,MAAM,wBAAwBH;QACxE;QAEA,uBAAOiB,aAAYrB,IAAAA,4BAAY,EAAC,OAAOC,KAAsBC,KAAeC;YACxE,MAAM,EAAEgB,QAAQ,EAAE,GAAGlB,IAAIU,MAAM;YAC/B,MAAMW,UAAUrB,IAAIa,IAAI,CAACC,EAAE;YAC3B,MAAMX,WAAW,MAAM,IAAI,CAACT,KAAK,CAAC0B,SAAS,CAACF,UAAUG;YACtDpB,IAAIG,MAAM,CAAC,KAAKC,IAAI,CAACC,IAAAA,wBAAW,EAAC,KAAK,MAAM,sBAAsBH;QACtE;;AACJ"}